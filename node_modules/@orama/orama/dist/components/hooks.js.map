{"version":3,"sources":["../../src/components/hooks.ts"],"sourcesContent":["import {\n  BeforeSearch,\n  AfterSearch,\n  AnyOrama,\n  MultipleCallbackComponent,\n  Results,\n  SearchParams,\n  SingleCallbackComponent,\n  TypedDocument\n} from '../types.js'\n\nexport const OBJECT_COMPONENTS = ['tokenizer', 'index', 'documentsStore', 'sorter']\n\nexport const FUNCTION_COMPONENTS = [\n  'validateSchema',\n  'getDocumentIndexId',\n  'getDocumentProperties',\n  'formatElapsedTime'\n]\n\nexport const SINGLE_OR_ARRAY_COMPONENTS = [\n  /* deprecated with v2.0.0-beta.5 */\n]\n\nexport async function runSingleHook<T extends AnyOrama, ResultDocument extends TypedDocument<T>>(\n  hooks: SingleCallbackComponent<T>[],\n  orama: T,\n  id: string,\n  doc?: ResultDocument\n): Promise<void> {\n  const hooksLength = hooks.length\n  for (let i = 0; i < hooksLength; i++) {\n    await hooks[i](orama, id, doc)\n  }\n}\n\nexport async function runMultipleHook<T extends AnyOrama, ResultDocument extends TypedDocument<T>>(\n  hooks: MultipleCallbackComponent<T>[],\n  orama: T,\n  docsOrIds: ResultDocument[] | string[]\n): Promise<void> {\n  const hooksLength = hooks.length\n  for (let i = 0; i < hooksLength; i++) {\n    await hooks[i](orama, docsOrIds)\n  }\n}\n\nexport async function runAfterSearch<T extends AnyOrama, ResultDocument extends TypedDocument<T>>(\n  hooks: AfterSearch<T, ResultDocument>[],\n  db: T,\n  params: SearchParams<T, ResultDocument>,\n  language: string | undefined,\n  results: Results<ResultDocument>\n): Promise<void> {\n  const hooksLength = hooks.length\n  for (let i = 0; i < hooksLength; i++) {\n    await hooks[i](db, params, language, results)\n  }\n}\n\nexport async function runBeforeSearch<T extends AnyOrama>(\n  hooks: BeforeSearch<T>[],\n  db: T,\n  params: SearchParams<T, TypedDocument<any>>,\n  language: string | undefined\n): Promise<void> {\n  const hooksLength = hooks.length\n  for (let i = 0; i < hooksLength; i++) {\n    await hooks[i](db, params, language)\n  }\n}\n"],"names":["OBJECT_COMPONENTS","FUNCTION_COMPONENTS","SINGLE_OR_ARRAY_COMPONENTS","runSingleHook","hooks","orama","id","doc","hooksLength","length","i","runMultipleHook","docsOrIds","runAfterSearch","db","params","language","results","runBeforeSearch"],"mappings":"AAWA,OAAO,MAAMA,oBAAoB;IAAC;IAAa;IAAS;IAAkB;CAAS,CAAA;AAEnF,OAAO,MAAMC,sBAAsB;IACjC;IACA;IACA;IACA;CACD,CAAA;AAED,OAAO,MAAMC,6BAA6B,EAEzC,CAAA;AAED,OAAO,eAAeC,cACpBC,KAAmC,EACnCC,KAAQ,EACRC,EAAU,EACVC,GAAoB,EACL;IACf,MAAMC,cAAcJ,MAAMK,MAAM;IAChC,IAAK,IAAIC,IAAI,GAAGA,IAAIF,aAAaE,IAAK;QACpC,MAAMN,KAAK,CAACM,EAAE,CAACL,OAAOC,IAAIC;IAC5B;AACF,CAAC;AAED,OAAO,eAAeI,gBACpBP,KAAqC,EACrCC,KAAQ,EACRO,SAAsC,EACvB;IACf,MAAMJ,cAAcJ,MAAMK,MAAM;IAChC,IAAK,IAAIC,IAAI,GAAGA,IAAIF,aAAaE,IAAK;QACpC,MAAMN,KAAK,CAACM,EAAE,CAACL,OAAOO;IACxB;AACF,CAAC;AAED,OAAO,eAAeC,eACpBT,KAAuC,EACvCU,EAAK,EACLC,MAAuC,EACvCC,QAA4B,EAC5BC,OAAgC,EACjB;IACf,MAAMT,cAAcJ,MAAMK,MAAM;IAChC,IAAK,IAAIC,IAAI,GAAGA,IAAIF,aAAaE,IAAK;QACpC,MAAMN,KAAK,CAACM,EAAE,CAACI,IAAIC,QAAQC,UAAUC;IACvC;AACF,CAAC;AAED,OAAO,eAAeC,gBACpBd,KAAwB,EACxBU,EAAK,EACLC,MAA2C,EAC3CC,QAA4B,EACb;IACf,MAAMR,cAAcJ,MAAMK,MAAM;IAChC,IAAK,IAAIC,IAAI,GAAGA,IAAIF,aAAaE,IAAK;QACpC,MAAMN,KAAK,CAACM,EAAE,CAACI,IAAIC,QAAQC;IAC7B;AACF,CAAC"}